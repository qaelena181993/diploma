# План автоматизированного тестирования сервиса покупки тура

## Перечень автоматизируемых сценариев

### Исходные данные

**Валидными данными при заполнении полей следует считать:**
- **"Номер банковской карты"**: 16 цифр в формате **** **** **** ****
- **"Месяц"**: число от 01 до 12
- **"Год"**: две последние цифры текущего или последующих годов (но не более 5 лет от текущего года)
- **"Владелец"**: Фамилия и Имя на латинице через пробел
- **"СVC/CVV"**: три цифры

**Номера банковских карт, используемых для тестирования:**
- Валидный номер банковской карты: "4444 4444 4444 4441" статус карты "Approved"
- Невалидный номер банковской карты: "4444 4444 4444 4442" статус карты "Declined"

**Примечание**
- ссылки перехода на станицу покупки тура доступны только при **запущенной SUT**

### UI тесты

#### Оплата по карте
1. **Заявка оплата по карте со статусом Approved, все поля формы покупки валидные**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Во всех полях ввести валидные данные, которые указаны в исходных данных, а номер карты 4444 4444 4444 4441
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** выведено сообщение - "Успешно. Операция одобрена банком!"

2. **Заявка оплата по карте со статусом Declined, все остальные поля формы валидные**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Во всех полях ввести валидные данные, которые указаны в исходных данных, а номер карты 4444 4444 4444 4442
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** выведено сообщение - "Ошибка! Банк отказал в проведении операции!"

3. **Заявка оплата по карте, значение поля "Номер карты" пустое, все остальные поля формы валидные**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Оставить поле "Номер карты" пустым, все остальные заполнить валидными данными, которые указаны в исходных данных
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Номер карты"

4. **Заявка оплата по карте, значение поля "Номер карты" из 15-ти цифр, все остальные поля формы валидные**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить поле "Номер карты" невалидным номером карты из 15-ти цифр (например, 4444 4444 4444 444), остальные поля заполнить валидными данными, которые указаны в исходных данных
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Номер карты"

5. **Заявка оплата по карте, заполненная данными карты, которой нет в базе данных банка**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить поле "Номер карты" валидным номером карты, которой нет в БД банка (например, 1234 5678 1234 5678), остальные поля заполнить валидными данными, которые указаны в исходных данных
* Нажать на кнопку "Продолжить"
  **Ожидаемый результат:** отправка формы возможна, выведено сообщение - "Ошибка! Банк отказал в проведении операции"

6. **Заявка оплата по карте, значение поля "Месяц" пустое, все остальные данные поля формы валидные**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Оставить значение поля "Месяц" пустым, все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "Месяц"

7. **Заявка оплата по карте, в значении поля "Месяц" указано 00**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Месяц" невалидным значением меньше 1 (например: 00), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Месяц"

8. **Заявка оплата по карте, в значении поля "Месяц" указано 13**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Месяц" невалидным значением больше 12 (например: 13), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Месяц"

9. **Заявка оплата по карте, в значении поля "Месяц" указано 3**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Месяц" невалидным значением из одной цифры (например: 3), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Месяц"

10. **Заявка оплата по карте, значение поля "Год" пустое**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Значение поля "Год" оставить пустым, все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение «Поле обязательно для заполнения» под полем "Год"

11. **Заявка оплата по карте, в значении поля "Год" указано 1**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Год" невалидными данными с неверным форматом года (например: 1), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Год"

12. **Заявка оплата по карте, значение поля "Год" предшествует текущему**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Год" невалидными данными года, предшествующего текущему (например: 21), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Истек срок действия карты" под полем "Год"

13. **Заявка оплата по карте, в значении поля "Год" указан год, превышающим 5 лет от текущего**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Год" годом, превышающим 5 лет от текущего (например: 28), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Год"

14. **Заявка оплата по карте, в значении поля "Владелец" фамилия и имя в верхнем регистре**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Владелец" фамилию и имя на латинице в верхнем регистре (например: CHAIA ELENA), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"
  **Ожидаемый результат:** форма отправилась успешно, выведено сообщение - "Успешно. Операция одобрена банком!"

15. **Заявка оплата по карте, в значении поля "Владелец" данные указаны через дефис**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Владелец" фамилию или имя через дефис (например: Галин-Рогалин / Виолетта-Викторовна), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** форма отправилась успешно, выведено сообщение - "Успешно. Операция одобрена банком!"

16. **Заявка оплата по карте, значение поля "Владелец" пустое**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Значение поля "Владелец" оставить пустым, все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "Владелец"

17. **Заявка оплата по карте, в значении поля "Владелец" указана фамилия на латинице, а имя отсуствует**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Владелец" только фамилию на латинице (например: Chaia), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

18. **Заявка оплата по карте, в значении поля "Владелец" фамилия и имя указана на кирилице**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* В значении поля "Владелец" фамилию и имя указать на кириллице (например: Чая Елена), а остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"   
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

19. **Заявка оплата по карте, значение поля "Владелец" указано цифрами**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Владелец" цифрами, все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

20. **Заявка оплата по карте, значение поля "Владелец" указано спецсимволами**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Заполнить значение поля "Владелец" спецсимволами, все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

21. **Заявка оплата по карте, значение поля "CVC/CVV" пустое**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Значение поля "CVC/CVV" оставить пустым, все остальные заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "CVC/CVV"

22. **Заявка оплата по карте, в значении поля "CVC/CVV" указана одна цифра**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Ввести в значении поля "CVC/CVV" одну цифру (например: 3), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "CVC/CVV"

23. **Заявка оплата по карте, в значении поля "CVC/CVV" указано две цифры**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Ввести в значении поля "CVC/CVV" две цифры (например: 33), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "CVC/CVV"

24.  **Заявка оплата по карте, отправка пустой формы оплаты**
* В браузере перейти по адресу localhost:8080
* Нажать на кнопку "Купить"
* Нажать на кнопку "Продолжить"  
  **Ожидаемый результат:** отправка формы невозможна, во всех полях предупреждение "Поле обязательно для заполнения"
  
  **ТЕСТЫ ПРОВЕСТИ НА ФУНКЦИОНАЛЕ "ОПЛАТА В КРЕДИТ"**
  
### API-тесты
#### Post запросы

1. Отправка валидных данных действующей карты 4444 4444 4444 4441 (approved) на URL-адрес http://localhost:9999/payment   
   **Ожидаемый результат:** ответ сервера: код 200

2. Отправка валидных данных недействующей карты 4444 4444 4444 4442 (declined) на URL-адрес http://localhost:9999/payment  
   **Ожидаемый результат:** ответ сервера: код 200

3. Отправка валидных данных действующей карты 4444 4444 4444 4441 (approved) на URL-адрес http://localhost:9999/credit  
   **Ожидаемый результат:** ответ сервера: код 200

4. Отправка валидных данных недействующей карты 4444 4444 4444 4442 (declined) на URL-адрес http://localhost:9999/credit  
   **Ожидаемый результат:** ответ сервера: код 200

## Перечень используемых инструментов с обоснованием выбора
* JDK 11 - Язык программирования на котором будет написан проект
* IntelliJ IDEA - Код автотестов написан на Java, IntelliJ IDEA - инструмент для написания автотестов на java
* Gradle - Легче писать код, управлять зависимостями
* JUnit - Удобный фреймворк, есть все необходимые аннотации  
  *Lombok - Автоматически генерируются конструкторы, код становится "легче"
* Selenide - Удобный фреймворк для написания автотестов (проще чем selenium)
* Virtual Machine - Для запуска докер образа в нашем проекте
* Allure - Для составления отчетов

## Перечень и описание возможных рисков при автоматизации
* если будет изменен интерфейс/добавлены еще какие-то фичи в форме оплаты, то придется переделывать тесты
* отсутствие спецификации на приложении
* сразу использованы две базы данных, что добавляет сложностей при настройке SUT
* после каждого прогона тестов необходимо очистить БД от записей
* потеря актуальности тестов UI/API при любом изменение в дизайне и структуры запросов со стороны банка
* остояние верстки при тех или иных действиях посетителя, комфортна ли выбранная цветовая схема оформления и тд.

## Интервальная оценка с учётом рисков (в часах):
* Настройка SUT - 10 часов
* Разработка тест-плана - 10 часов
* Написание авто-тестов и их прогон - 100 часов
* Написание баг-репортов - 19 часов
* Написание отчета по результатам автоматизации - 15 часов
* Настройка CI - 5 часов

## План сдачи работ
1. Готовность автотестов: 18 ноября 2022 г.
2. Баг-репорты и отчет по результатам теста: 19 ноября 2022 г.
3. Отчет по результатам автоматизированного тестирования: 20 ноября 2022 г.
